`202005_extraplot_herbivory` <- read.delim("~/Fac/Cesure2/Plant species coexistence/protocols/202005_extraplot_herbivory.txt")
View(`202005_extraplot_herbivory`)
data<- read.delim("~/Fac/Cesure2/Plant species coexistence/protocols/202005_extraplot_herbivory.txt")
head(data)
load("~/Fac/Cesure2/Plant species coexistence/functions_and_coex/workspaces/biomasse.RData")
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_shift, col=species))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
library(ggplot2)
library(dplyr)
library(tidyr)
library(lme4)
library(emmeans)
library(lmerTest)
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_shift, col=species))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_point(aes(Omega, biomass, col=species))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
str(main_data_control)
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
str(summary(mod_biom_shift))
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
coef_biom_shift = summary(mod_biom_shift)$coefficients
hist(summary(mod_biom_shift)$residuals)
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
coef
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ log(Omega) + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_point(aes(log(Omega), biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_point(aes(Omega, log(biomass_per_sp)  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = log(biomass_per_sp) ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(Omega, log(biomass_per_sp)  , col=specie_solo))+
geom_abline(intercept = coef[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
coef[1,1]
coef_biom_shift[2,1]
str(summary(mod_biom_shift))
summary(mod_biom_shift)
str(summary(mod_biom_shift))
coef
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(Omega, log(biomass_per_sp)  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
coef_biom_shift
coef_biom_shift[1,1]
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = log(biomass_per_sp) ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
str(summary(mod_biom_shift))
summary(mod_biom_shift)
coef_biom_shift = summary(mod_biom_shift)$coefficients
hist(summary(mod_biom_shift)$residuals)
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega (Omega|specie_solo),data = main_data_control)
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + (Omega|specie_solo),data = main_data_control)
mod_biom_shift
summary(mod_biom_shift)
coef_biom_shift
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + (1|specie_solo),data = main_data_control)
summary(mod_biom_shift)
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + (Omega|specie_solo),data = main_data_control)
summary(mod_biom_shift)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + (1|specie_solo),data = main_data_control)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(Omega, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
summary(mod_biom_shift)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_point(aes(feasibility, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
geom_boxplot(aes(feasibility, biomass_per_sp)+
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
biomass_per_sp$feasibility= =as.factor(biomass_per_sp$feasibility)
### Increasing niche difference will add
biomass_per_sp$feasibility = as.factor(biomass_per_sp$feasibility)
### Increasing niche difference will add
biomass_per_sp$feasibility = as.factor(biomass_per_sp$feasibility)
biomass_per_sp$feasibility
biomass_per_sp
##### biomass models #####
main_data$feasibility = as.factor(biomass_per_sp$feasibility)
main_data_control = subset(main_data, main_data$nitrogen == 0 &
main_data$type == "triplet")
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
summary(mod_biom_shift)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
### Increasing niche difference will add
str(main_data_control)
##### biomass models #####
main_data$feasibility = as.factor(main_data$feasibility)
main_data_control = subset(main_data, main_data$nitrogen == 0 &
main_data$type == "triplet")
mod_biom_shift <- lmer(formula = biomass_per_sp ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
coef_biom_shift = summary(mod_biom_shift)$coefficients
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass_per_sp))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_point(aes(indirect_effects, biomass_per_sp  , col=specie_solo))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
mod_biom_shift <- lmer(formula = biomass ~ Omega + feasibility + indirect_effects + coex_rate + (1|specie_solo),data = main_data_control)
### Increasing niche difference will add
str(main_data_control)
summary(mod_biom_shift)
ggplot(main_data_control)+
geom_point(aes(Omega, biomass ))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_point(aes(indirect_effects, biomass))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
ggplot(main_data_control)+
geom_boxplot(aes(feasibility, biomass))+
geom_abline(intercept = coef_biom_shift[1,1], slope = coef_biom_shift[2,1],
linetype =2 , color = "blue")
save.image("~/Fac/Cesure2/Plant species coexistence/functions_and_coex/workspaces/biomasse.RData")
par_height <- read.delim2(file.path(data_dir,"PAR_and_height6.txt"),header = TRUE, dec = ".")
#### load and shape data ####
localDir="~/Fac/Cesure2/Plant_species_coexistence/functions_and_coex/"
setwd(localDir)
data_dir = "oster_data_2022"
par_height <- read.delim2(file.path(data_dir,"PAR_and_height6.txt"),header = TRUE, dec = ".")
str(par_height)
tail(par_height)
par_height$date = as.Date(par_height$date, format="%m.%d.%y")
par_height$treatment = as.character(par_height$treatment)
names(par_height)[names(par_height) == "treatement"] =  "treatment"
par_height$treatment = as.character(par_height$treatment)
par_height$treatment[par_height$treatment == "1"] = "nitrogen"
par_height$treatment[par_height$treatment == "0"] = "control"
par_height$PAR_inf
par_height$PAR_inf[par_height$PAR_inf>21] = round(par_height$PAR_inf[par_height$PAR_inf>21])
par_height$mean_height = rowMeans(par_height[,5:8])
par_height$PAR_diff = par_height$PAR_sup- par_height$PAR_inf
par_height$species_2[c(par_height$species_2 == "-")] = NA
par_height$species_3[c(par_height$species_3 == "-")] = NA
str(par_height)
ggplot(par_height)+
facet_wrap(~nitrogen*season)+
geom_boxplot(aes(date_char, mean_height))
for (i in 1){
library(ggplot2)
library(dplyr)
library(tidyr)
library(readxl)
library(writexl)
}
ggplot(par_height)+
facet_wrap(~nitrogen*season)+
geom_boxplot(aes(date_char, mean_height))
str(par_height)
par_height <- read.delim2(file.path(data_dir,"PAR_and_height6.txt"),header = TRUE, dec = ".")
str(par_height)
names(par_height)[names(par_height) == "treatement"] =  "treatment"
par_height$treatment = as.character(par_height$treatment)
par_height$treatment[par_height$treatment == "1"] = "nitrogen"
par_height$treatment[par_height$treatment == "0"] = "control"
par_height$date = as.Date(par_height$date, format="%m.%d.%y")
par_height$PAR_inf[par_height$PAR_inf>21] = round(par_height$PAR_inf[par_height$PAR_inf>21])
par_height$mean_height = rowMeans(par_height[,5:8])
par_height$PAR_diff = par_height$PAR_sup- par_height$PAR_inf
par_height$species_2[c(par_height$species_2 == "-")] = NA
par_height$species_3[c(par_height$species_3 == "-")] = NA
ggplot(par_height)+
facet_wrap(~nitrogen*season)+
geom_boxplot(aes(date_char, mean_height))
str(par_height)
ggplot(par_height)+
facet_wrap(~nitrogen)+
geom_boxplot(aes(date_char, mean_height, col =season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_boxplot(aes(date_char, mean_height, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_boxplot(aes(date_char, mean_height, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_boxplot(aes(date, mean_height, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_boxplot(aes(date, pheno_sp1, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_point(aes(date, pheno_sp1, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_point(aes(date, pheno_sp2, col = season))
ggplot(par_height)+
facet_wrap(~treatment)+
geom_point(aes(date, pheno_sp3, col = season))
View(par_height)
View(par_height)
##### Rdata #####
write.table(par_height, file.path("data","par_and_height.txt"), dec = ".", col.names = TRUE)
